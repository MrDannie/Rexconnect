<div class="header">
  <!-- <div class="top-header my-5">
  <div class="header">
    <h2 class="header__text">Terminals</h2>
    <span class="sub-head mb-3"
      >View details of every terminal on the platform</span
    >
  </div>
  <div class="action-btns">
    <button class="terminal-upload-btn">Bulk Terminal Upload</button>
    <button class="terminal-add-btn">Add Terminal</button>
  </div>
</div> -->

  <!-- Here is the first here  -->
  <div class="main-header">
    <div class="header__text animated fadeIn">
      <div>
        <span>Merchants</span>
      </div>

      <div class="button_header_section">
        <button
          class="btn action_button"
          data-toggle="modal"
          data-target="#createMerchant"
        >
          <i class="fa fa-plus animated slideIn"></i>
          Add Merchant
        </button>
      </div>
    </div>
    <span>View Details of every merchant on this platform</span>
  </div>

  <!-- FILTER BY CODE  -->
  <div class="header__search">
    <span class="filter_click" (click)="showFilter = !showFilter">
      <img
        src="../../../../../assets/icons/Filter-Icon.svg"
        alt="search"
        class="img-fluid"
      />
      <span
        class="filter_text"
        id="dropdownMenuButton"
        onselectstart="return false"
        unselectable="on"
      >
        Filter Table By
      </span>
    </span>
    <div
      class="card search-dropdown"
      *ngIf="showFilter"
      id="filter__dropdown"
      style="height: 250px"
    >
      <form [formGroup]="searchForm" (ngSubmit)="searchBy()" >
        <div class="row">

          <div class="col-md-4">
            <div class="form-group">
              <label for="merchantId" class="search_label"
                >Merchant ID</label>
              <input
                type="text"
                class="form-control search_input"
                formControlName="merchantId"
                id="merchantId"
              >
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group">
              <label for="transactionType" class="search_label"
                >Transaction Type</label
              >
              <select
                type="text"
                class="form-control search_input"
                formControlName="transactionType"
                id="transactionType"
              >
                <option value=""></option>
              </select>
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group">
              <label for="terminalId" class="search_label">Terminal ID</label>
              <input
                type="text"
                class="form-control search_input"
                formControlName="terminalId"
                id="terminalId"
              />
            </div>
          </div>

          <div class="col-md-4">
            <div class="form-group">
              <label for="rrn" class="search_label">RRN</label>
              <select
                type="text"
                class="form-control search_input"
                formControlName="rrn"
                id="rrn"
              >
                <option value="">Select role</option>
                <option></option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="approvalDate" class="search_label"
                >Approval Date</label
              >
              <input
                type="text"
                class="form-control search_input"
                formControlName="approvalDate"
                id="approvalDate"
              />
            </div>
          </div>
          <div class="col-md-4">
            <div class="form-group">
              <label for="lastUpdateDate" class="search_label"
                >Last Update Date</label
              >
              <input
                type="text"
                class="form-control search_input"
                formControlName="lastUpdateDate"
                id="lastUpdateDate"
              />
            </div>
          </div>
        </div>

        <div class="button-section text-right">
          <button
            class="btn button-white"
            type="button"
            (click)="showFilter = false;"
          >Close</button>

          <button
            class="btn button-pink"
            type="submit"
          >
            Apply Filters
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Reset button -->
  <button class="btn btn-secondary reset-filter" (click)="clearFilters()">
    <!-- <i class="fa fa-refresh fa-fast-spin"></i> -->
    <i class="fa fa-refresh"></i>
    Refresh
  </button>

  <!-- FILTER BY CODE ENDS HERE  -->

  <!-- New Header Ends HEre  -->
</div>

<div class="table-container custom-table animated fadeIn">
  <div class="card-body">
    <table class="table table-striped">
      <thead class="thead-dark">
        <tr>
          <th scope="col">Merchant Name</th>
          <th scope="col">Merchant ID</th>
          <th scope="col">Merchant Category Code</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let merchant of allMerchants">
          <td>{{ merchant.merchantName }}</td>
          <td>{{ merchant.merchantId }}</td>
          <td>{{ merchant.merchantCategoryCode }}</td>
          <td>
            <button
              [routerLink]="[merchant.merchantId]"
              class="btn table_button"
            >Open</button>
          </td>
        </tr>

      </tbody>
    </table>
    <span class="empty-state" *ngIf="allMerchants.length === 0 && !isLoading"  >
      No Records Found
    </span>
  </div>
</div>

<app-rex-pagination
  [data]="allMerchants"
  [totalElements]="dataCount"
  (pageCountSelected)="requestPageSize($event)"
  (refreshData)="onRefreshData($event)"
  *ngIf="isLoaded"
></app-rex-pagination>

<!-- CREATE MERCHANT  -->
<div
  class="modal animated zoomIn"
  id="createMerchant"
  tabindex="-1"
  role="dialog"
  aria-labelledby="createUserLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <h5 class="modal-title" id="createUserLabel">Add Merchant</h5>
        <form [formGroup]="createMerchantForm">
          <!-- RELEVANT CODE HERE  -->
          <div class="form-row">
            <div class="form-group col-md-12">
              <div class="">
                <span class="has-float-label">
                  <input
                    class="form-control"
                    id="merchantName"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  />
                  <label for="merchantName">Merchant Name</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-12">
              <div class="">
                <span class="has-float-label">
                  <input
                    class="form-control"
                    id="terminalId"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  />
                  <label for="merchantId">Merchant ID</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-4">
              <div class="">
                <span class="has-float-label">
                  <input
                    class="form-control"
                    id="terminalId"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  />
                  <label for="merchantId">Dialing Code</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group col-md-8">
              <div class="">
                <span class="has-float-label">
                  <input
                    class="form-control"
                    id="terminalId"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  />
                  <label for="merchantId">Phone Number</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-12">
              <div class="">
                <span class="has-float-label">
                  <input
                    class="form-control"
                    id="merchantName"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  />
                  <label for="merchantName">Merchant Address</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-6">
              <div class="">
                <span class="has-float-label">
                  <select
                    class="form-control"
                    id="terminalId"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  >
                    <option value="Select option"></option>
                  </select>
                  <label for="merchantId">Merchant Type</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <div class="">
                <span class="has-float-label">
                  <select
                    class="form-control"
                    id="terminalId"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  >
                    <option value="select option"></option>
                  </select>
                  <label for="merchantId">Merchant Category Code</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group col-md-12">
              <div class="">
                <span class="has-float-label">
                  <select
                    class="form-control"
                    id="merchantName"
                    type="text"
                    placeholder=" "
                    formControlName="merchantId"
                  >
                    <option value="Select option"></option>
                  </select>
                  <label for="merchantName">Acquirer</label>
                </span>
                <div *ngIf="false" class="validation-message">
                  <span class="validation-message">
                    Here is the validation message
                    <br />
                  </span>
                </div>
              </div>
            </div>
          </div>
          <!-- RELEVANT CODE HERE  -->

          <div class="form_actions">
            <div
              class="cancel_button"
              data-dismiss="modal"
              (click)="createMerchantForm.reset()"
            >
              Cancel
            </div>
            <button
              class="btn action_button"
              (click)="createUser(createMerchantForm.value)"
            >
              <i class="fa fa-plus animated slideIn"></i>
              Add Merchant
            </button>

            <div
              class="spinner-border spinner-border-sm ml-3"
              *ngIf="false"
              role="status"
            >
              <span class="sr-only">Loading...</span>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
